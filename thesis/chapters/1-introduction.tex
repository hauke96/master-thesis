% !TEX root = ../thesis.tex
% !TeX spellcheck = en_US

\section{Motivation}
	
	% finding good routes is difficult, solved using A*/Dijkstra on networks
	Traveling through a network of roads and paths often requires the use of a computer systems determining the optimal route from a source to a target location.
	The software used to find such routes is called a \emph{routing engine} and is based on algorithms finding such routes.
	In computer science these algorithms usually work on graphs and the problem to solve is called the \term{shortest-path problem}.
	A graph is used as the central data structure abstracting the real world into vertices and edges, which are points connected by lines representing roads and ways.
	Such graphs, however, can also represent other non-physical networks, for example trading relations between countries, social media networks or routers in the internet.
	However, this thesis only considers graphs representing road networks.
	
	Graphs representing road networks only build an abstraction of the real world.
	Detailed information regarding the geometry and infrastructure, such as the width or number of lanes, are usually added using attributes describing these properties.
	% networks have to be (manually) created and routing is fixed to network
	Next to line based shapes, the real world also consists of polygonal shapes like market places, parking areas or parks.
	Classical routing algorithms can only interpret the outer edges of these polygons as closed lines and therefore only find paths along these outer edges.
	Often auxiliary edges are added to connect opposite sides to allow routing algorithms to cross these areas.
	This is a common practice in OpenStreetMap, for example on the Rathausmarkt (town hall market) in Hamburg, Germany \footnote{Auxiliary ways were added inside the closed OSM-way with ID  \href{https://www.openstreetmap.org/way/142944433}{142944433}.}.
	A hand full of lines can be added quite easily by hand, but filling large areas or even a whole city with these auxiliary paths is not feasible to be done manually.
	Algorithms do exist to add paths to areas and will be described later in \cref{subsec:geometric-routing}.
	
	Popular approaches for network based routing, like the Dijkstra and A* algorithm, are well understood, optimized and used in numerous scientific and real world applications.
	Over the last decades, optimizations and the usage of better data structures lead to further performance enhancements making it possible to use such routing algorithms on large scale networks.
	Even though, the performance is good enough for larger networks, like the road network of the USA\cite[5]{aviram-optimizing-dijkstra}, several speed up methods exist, to further decrease query times.
	Some of them will be covered later in \cref{subsec:speedup-methods}.
	Using such techniques enables global routing request being processed within milliseconds\footnote{Tested for a routing request from Hamburg, Germany to Beijing, China on \href{https://www.openstreetmap.org/directions?engine=fossgis\_osrm\_car&route=53.55\%2C10.00\%3B39.91\%2C116.39}{openstreetmap.org} using the OSRM car profile which is based on Contraction Hierarchies (s. \cref{subsubsec:ch}). The HTTP request returned the result in under 215ms -- including network latency of several milliseconds.}
	
	% problem: Most real world destinations are not on the network
	Handling open spaces is a problem and a similar problem arises with the exact source and target locations of real world routing.
	These location are often not part of the underlying routing graph, which is the case for most addresses, \term*{points of interest} (POIs) and locations manually chosen by the user.
	They either have to be connected manually or a location on the graph is somehow chosen (e.g. by taking the nearest vertex or intermediate location on an edge).
	However, the space between arbitrary coordinates and the actual road network can contain numerous obstacles and a connection might not even exist.
	
	% alternative: geometric routing avoiding obstacles
	Next to graph based shortest path algorithms, pure geometric approaches exist to determine shortest paths\index{geometric routing} among obstacles in open spaces.
	Obstacles are geometries that cannot be passed like buildings, fences, lakes or cliffs.
	There are two main strategies to solve this problem\cite[2]{hershberger-suri}:
	
	The first approach generates an auxiliary network around these obstacles (just like the auxiliary paths mentioned above) and then uses a graph based shortest path algorithm to find the actual path.
	Probably the most common way is to create a so called \term{visibility graph}, a graph with edged between all vertices that are visible to each other.
	Alternative ways of generating such a network are for example skeletonization and Voronoi diagrams, which all have different properties \cite[3-4]{graser-osm-open-spaces}.
	A network based shortest path algorithm is then able to find paths on this generated network\cite[2]{hershberger-suri}.
	Generating a graph can therefore be seen as a pre-processing step.
	
	The second approach does not create such a graph but stores its shortest-path information for each source vertex $s$ in a map.
	It therefore subdivides the plain into regions where each region has a common predecessor on a shortest path from $s$.
	Following these predecessors back to $s$, gives the shortest path to a given location.
	This approach is also called the \term{continuous dijkstra} paradigm and will be described in detail in \cref{subsec:geometric-routing}.
	
\section{Problem and contributions}

	The previous section mentions one of the disadvantages of network based routing:
	Source and target locations are probably not on the graph.
	Furthermore, shortest paths taken by pedestrians in the real world are -- without manually added edges -- not part of the graph.
	Routes strictly following the edges of a graph are therefore inaccurate, especially for pedestrian routing \cite[1]{graser-osm-open-spaces}.

	This thesis solves these issues by proposing, implementing and evaluating a hybrid routing algorithm that combines the flexibility and accuracy of geometric routing with the performance and wide use of network based routing.
	Calculating shortest paths using the resulting approach is still fast but reaches arbitrary locations.
	Real world applications as well as simulations, such as multi-agent simulations of pedestrian behavior, benefit from this algorithm.
	
\section{Structure of this thesis}

	First, the basics of spatial data, data formats, graph routing, geometric routing and agent based simulations are covered in \cref{chap:preliminaries}.
	The scientific work related to this thesis is presented in \cref{chap:related-work} for graphs and networks, routing techniques and pedestrian path finding in particular.
	\Cref{chap:design} describes the design of the system developed for this thesis and gives an overview of the different components and elements.
	A more detailed view of the implementation is given in \cref{chap:implementation} describing the technical aspects of combining network and geometric routing as well as the frameworks that were used.
	The hybrid solution is then evaluated in \cref{chap:evaluation} regarding performance, correctness and quality of the resulting routes.