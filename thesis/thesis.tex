% !TeX spellcheck = en_US

\documentclass[
	11pt,
	a4paper,
	usegeometry,
	twoside,
	openright,
	toc=chapterentrywithdots
]{scrbook}

\KOMAoptions{
	listof=totoc,
	bibliography=totoc,
	index=totoc
}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[ngerman,english]{babel}
\usepackage[english]{datetime2}

\usepackage{libertine}
%\usepackage[sc]{mathpazo}
% Maybe this for math: \usepackage{libertinust1math}
%\usepackage{courier}
%\usepackage{inconsolata}
%\renewcommand*\ttdefault{cmvtt}
%\usepackage[defaultmono,scale=0.8]{droidsansmono}
%\usepackage[scale=0.94]{newtxtt}
\usepackage[light,scale=0.98]{zlmtt}
\usepackage{microtype}
\usepackage[onehalfspacing]{setspace}
\usepackage{csquotes}

\usepackage[left=2.5cm, top=2.5cm, right=2.5cm, bottom=2.5cm, bindingoffset=5mm]{geometry}
\usepackage{fancyhdr}
\usepackage[hang]{footmisc}

\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{nicefrac}

\usepackage{algorithm}
\usepackage{algpseudocode}

\usepackage[x11names]{xcolor}
\usepackage{graphicx}
\usepackage{wrapfig}
\usepackage[labelfont=bf,format=plain,indention=0.5cm]{caption}
\usepackage{subcaption}

\usepackage{enumerate}
\usepackage{enumitem}

\usepackage{multicol}
\usepackage{xifthen}
\usepackage{suffix}

% TODO remove this when done
\newcommand{\todo}[2][]
{%
	\ifthenelse{\equal{inline}{#1}}
	{%
		\textcolor{red}{\textbf{TODO: #2}}
	}%
	{%
		\vspace{0.25cm}\par\noindent%
		\textcolor{red}{\textbf{TODO: #2}}%
		\vspace{0.25cm}\par%
	}%
}

%
% Tables
%
\usepackage{tabularx}
\usepackage{booktabs}

% Make spacing in tables slightly larger
\renewcommand{\arraystretch}{1.15}
\newcolumntype{R}{>{\raggedleft\arraybackslash}X}

%
% Abstract
%
\newenvironment{abstract}{}{} % Needed due to re-definition in package "abstract"
\usepackage{abstract}

%
% BibTex, Index, etc.
%

% Must be placed here before BibTeX and URL/ref related packages:
\PassOptionsToPackage{obeyspaces}{url} % Allow spaces in URLs
\PassOptionsToPackage{spaces}{url}     % Enable line breaks in URLs

\usepackage[toc, page]{appendix}
\usepackage[
	backend=bibtex8,
	style=numeric,
	sorting=none,
	urldate=long,
	backref
]{biblatex}
\usepackage{imakeidx}
\usepackage{hyperref}
\usepackage[noabbrev]{cleveref}

\makeindex[intoc,columns=2,options= -s index-style.ist]
\addbibresource{sources.bib}
\let\oldCite\cite
\renewcommand{\cite}[2][]{ \oldCite[#1]{#2}} % Add space before citation

\NewBibliographyString{diplomathesis}
\DefineBibliographyStrings{english}{
	diplomathesis = {diploma thesis},
}

%
% Continuous figure and table numbering
%
\usepackage{chngcntr}
\counterwithout{figure}{chapter}
\counterwithout{table}{chapter}

%
% Commands
%
\newcommand{\bigo}[1]{\mathcal{O}(#1)}

% Command to add terms to the glossary but with some formatting and aliases if wanted.
\newcommand{\term}[2][]
{%
	\ifthenelse{\isempty{#1}}%
	{%
		\term*[#2]{\textit{#2}}%
	}%
	{%
		\term*[#1]{\textit{#2}}%
	}%
}
\WithSuffix\newcommand\term*[2][]
{%
	\ifthenelse{\isempty{#1}}%
	{%
		#2\index{#2}%
	}%
	{%
		#2\index{#1}%
	}%
}

% Environment to center content of a figure without adding extra spacing before the caption
\newenvironment{figcenter}
{%
	\parskip=0pt%
	\par%
	\nopagebreak%
	\centering%
}%
{%
	\par%
	\noindent%
	\ignorespacesafterend%
}

%
% TikZ
%
\usepackage{tikz}
\usetikzlibrary{
	arrows,
	arrows.meta,
	calc,
	external,
	fadings,
	intersections,
	patterns,
	positioning,
	snakes
}
\tikzexternalize[prefix=tikz-cache/]

\tikzset{every path/.append style={line width=0.5pt}}
\tikzset{every path/.append style={>=stealth'}}
\tikzset{
	between/.style args={#1 and #2}{
		at = ($(#1)!0.5!(#2)$)
	}
}
\tikzset{
	dot/.style={circle,fill,inner sep=0.4mm,outer sep=0.25mm}
}
% [params] pos id
\newcommand{\tikzDot}[3][]{\node (#3) at #2 [dot,#1]{};}

%
% General page styling
%
\pagestyle{fancyplain}
\fancyfoot[C]{\thepage}
\fancyhead{}
\renewcommand{\headrulewidth}{0pt}
\setlength{\footnotemargin}{1ex}
\raggedbottom

% Less margin for itemize environments
\setlist[itemize]{noitemsep, leftmargin=2em}
\setlist[enumerate]{noitemsep, leftmargin=2.25em}

% Allow line and word breaks in tele-type font
\newcommand{\origttfamily}{}
\let\origttfamily=\ttfamily
\renewcommand{\ttfamily}{\origttfamily \hyphenchar\font=`\-}

% To create contours around text and define default contour size
\usepackage[outline]{contour}
\contourlength{1.2pt}

% Hide subsubsections in TOC
\setcounter{tocdepth}{1}

\begin{document}
	\include{titlepage.tex}
	
	\pagenumbering{Roman}
	
	\cleardoubleoddpage
	\input{chapters/abstract.tex}
	\vfill
	
	\tableofcontents
	\clearpage
	
	\pagenumbering{arabic}
	
	\chapter{Introduction}
	\label{chap:introduction}
	
		\input{chapters/1-introduction.tex}
	
	\chapter{Fundamentals}
	\label{chap:fundamentals}
	
		\input{chapters/2-fundamentals.tex}
		
	\chapter{Related work}
	\label{chap:related-work}
	
		\input{chapters/3-related-work.tex}
	
	\chapter{Design}
	\label{chap:design}
	
		\input{chapters/4-design.tex}
	
	\chapter{Implementation}
	\label{chap:implementation}
	
		\input{chapters/5-implementation.tex}
	
	\chapter{Evaluation}
	\label{chap:evaluation}
	
		\input{chapters/6-evaluation.tex}
	
	\chapter{Conclusion}
	
		\input{chapters/7-conclusion.tex}
		
	\printbibliography

	\printindex
	
	\listoffigures
	\listoftables
	
	\chapter*{Appendix}
	
		\input{chapters/eidesstattliche-versicherung.tex}
\end{document}