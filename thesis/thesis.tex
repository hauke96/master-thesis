% !TeX spellcheck = en_US

\documentclass[
	11pt,
	a4paper,
	usegeometry,
	twoside,
	openright,
	toc=chapterentrywithdots
]{scrbook}

\KOMAoptions{
	listof=totoc,
	bibliography=totoc,
	index=totoc
}

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[ngerman,english]{babel}
\usepackage[english]{datetime2}

\usepackage{libertine}
%\usepackage[sc]{mathpazo}
% Maybe this for math: \usepackage{libertinust1math}
%\usepackage{courier}
%\usepackage{inconsolata}
%\renewcommand*\ttdefault{cmvtt}
%\usepackage[defaultmono,scale=0.8]{droidsansmono}
%\usepackage[scale=0.94]{newtxtt}
\usepackage[light,scale=0.98]{zlmtt}
\usepackage{microtype}
\usepackage[onehalfspacing]{setspace}
\usepackage{csquotes}

\usepackage[left=2.5cm, top=2.5cm, right=2.5cm, bottom=2.5cm, bindingoffset=5mm]{geometry}
\usepackage{fancyhdr}

\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}

\usepackage{algorithm}
\usepackage{algpseudocode}

\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{tabularx}
\usepackage{enumerate}
\usepackage{enumitem}
\usepackage{multicol}
\usepackage{xifthen}
\usepackage{suffix}
\usepackage[hang]{footmisc}

% TODO remove this when done
\usepackage[textwidth=2cm,colorinlistoftodos]{todonotes}
\newcommand{\citationNeeded}{\todo[backgroundcolor=red,textcolor=white,linecolor=red]{citation needed}}
\makeatletter
\renewcommand{\todo}[2][]{\tikzexternaldisable\@todo[#1]{#2}\tikzexternalenable}
\makeatother

% Must be placed ehre before BibTeX and URL/ref related packages:
\PassOptionsToPackage{obeyspaces}{url} % Allow spaces in URLs
\PassOptionsToPackage{spaces}{url}     % Enable line breaks in URLs

%
% BibTex, Index, etc.
%
\usepackage[toc, page]{appendix}
\usepackage[
	backend=bibtex8,
	style=numeric,
	sorting=none,
	urldate=long,
	backref
]{biblatex}
\usepackage{imakeidx}
\usepackage{hyperref}
\usepackage[noabbrev]{cleveref}

\makeindex[intoc,columns=2,options= -s index-style.ist]
\addbibresource{sources.bib}
\let\oldCite\cite
\renewcommand{\cite}[2][]{ \oldCite[#1]{#2}} % Add space before citation

\NewBibliographyString{diplomathesis}
\DefineBibliographyStrings{english}{
	diplomathesis = {diploma thesis},
}

%
% Continuous figure and table numbering
%
\usepackage{chngcntr}
\counterwithout{figure}{chapter}
\counterwithout{table}{chapter}

%
% Commands
%
\newcommand{\bigo}[1]{\mathcal{O}(#1)}
\newcommand{\term}[2][]
{%
	\ifthenelse{\isempty{#1}}%
	{%
		\term*[#2]{\textit{#2}}%
	}%
	{%
		\term*[#1]{\textit{#2}}%
	}%
}
\WithSuffix\newcommand\term*[2][]
{%
	\ifthenelse{\isempty{#1}}%
	{%
		#2\index{#2}%
	}%
	{%
		#2\index{#1}%
	}%
}

%
% TikZ
%
\usepackage{tikz}
\usetikzlibrary{arrows}
\usetikzlibrary{calc}
\usetikzlibrary{external}
\usetikzlibrary{fadings}
\usetikzlibrary{positioning}

\tikzexternalize[prefix=tikz-cache/]

\newcommand{\tikzLabeledDot}[4][]{\node (#3) at (#2) [circle,fill,inner sep=0.5mm,outer sep=0.25mm,label=#4,#1]{};}
\newcommand{\tikzDot}[3][]{\tikzLabeledDot[#1]{#2}{#3}{};}

\tikzset{
	between/.style args={#1 and #2}{
		at = ($(#1)!0.5!(#2)$)
	}
}

%
% General page styling
%
\pagestyle{fancyplain}
\fancyfoot[C]{\thepage}
\fancyhead{}
\renewcommand{\headrulewidth}{0pt}
\setlength{\footnotemargin}{1ex}

% Less margin for itemize environments
\setlist[itemize]{noitemsep, leftmargin=2em}
\setlist[enumerate]{noitemsep, leftmargin=2em}

\begin{document}
	\include{titlepage.tex}
	
	\tableofcontents
	\thispagestyle{empty}
	\clearpage
	
%	\listoftodos
%	\clearpage
	
	\chapter{Introduction}
	
		\input{chapters/1-introduction.tex}
	
	\chapter{Fundamentals}
	\label{chap:fundamentals}
	
		\input{chapters/2-fundamentals.tex}
		
	\chapter{Related work}
	\label{chap:related-work}
	
		\input{chapters/3-related-work.tex}
	
	\chapter{Design}
	\label{chap:design}
	
		\input{chapters/4-design.tex}
	
	\chapter{Implementation}
	\label{chap:implementation}
	
		\input{chapters/5-implementation.tex}
	
	\chapter{Evaluation}
	\label{chap:evaluation}
	
		\section{Performance \& Correctness}
		
			\subsection{Correctness}
			
			\subsection{Performance}
			
			\subsubsection{Used methods and system}
			
			% Maybe: complexity analysis
			
			\subsubsection{Results}
		
		\section{Quality of routing}
		
			\subsection{Usefulness of routes}
			
			% How realistic are the routes (= can I go there in real life)? If not: Why not?
			
			\subsection{Accuracy of simulations}
		
			% Concrete scenario (parameters/model, what happens), evaluation
	
	\chapter{Conclusion}
	
		\section{Future work}
		
	\printbibliography

	\printindex
	
	\chapter*{Appendix}
	
		\input{chapters/eidesstattliche-versicherung.tex}
\end{document}